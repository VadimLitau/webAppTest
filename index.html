<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=PT+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap"
			rel="stylesheet"
		/>
		<link
			href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap"
			rel="stylesheet"
		/>

		<title>MINES</title>
	</head>
	<body>
		<style>
			/* Reset and base styles  */
			* {
				padding: 0px;
				margin: 0px;
				border: none;
			}

			*,
			*::before,
			*::after {
				box-sizing: border-box;
			}

			/* Links */

			a,
			a:link,
			a:visited {
				text-decoration: none;
			}

			a:hover {
				text-decoration: none;
			}

			/* Common */

			aside,
			nav,
			footer,
			header,
			section,
			main {
				display: block;
			}

			h1,
			h2,
			h3,
			h4,
			h5,
			h6,
			p {
				font-size: inherit;
				font-weight: inherit;
			}

			ul,
			ul li {
				list-style: none;
			}

			img {
				vertical-align: top;
			}

			img,
			svg {
				max-width: 100%;
				height: auto;
			}

			address {
				font-style: normal;
			}

			/* Form */

			input,
			textarea,
			button,
			select {
				font-family: inherit;
				font-size: inherit;
				color: inherit;
				background-color: transparent;
			}

			input::-ms-clear {
				display: none;
			}

			button,
			input[type="submit"] {
				display: inline-block;
				box-shadow: none;
				background-color: transparent;
				background: none;
				cursor: pointer;
			}

			input:focus,
			input:active,
			button:focus,
			button:active {
				outline: none;
			}

			button::-moz-focus-inner {
				padding: 0;
				border: 0;
			}

			label {
				cursor: pointer;
			}

			legend {
				display: block;
			}
		</style>
		<style>
			body {
				font-family: "PT Sans", sans-serif;
				font-weight: 400;
				font-style: normal;
				box-sizing: border-box;
			}

			.wrap {
				display: flex;
				align-items: center;
				justify-content: center;
				height: 100vh;
				background: -webkit-linear-gradient(
					180deg,
					rgb(18, 5, 37) 73%,
					rgb(119, 0, 169)
				);
				background: -moz-linear-gradient(
					180deg,
					rgb(18, 5, 37) 73%,
					rgb(119, 0, 169)
				);
				background: linear-gradient(
					180deg,
					rgb(18, 5, 37) 73%,
					rgb(119, 0, 169)
				);
			}
			.main {
				background-image: url(./bgi.png);
				background-repeat: no-repeat;
				background-size: cover;
				width: 320px;
				height: 600px;
				color: aliceblue;
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
				position: relative;
			}
			.lang-wrap {
				display: flex;
				flex-direction: column;
				align-items: center;
				opacity: 1;
				/* opacity: 0; */
				transition: opacity ease 0.5s;
				position: absolute;
				z-index: 10;
			}

			.main__lang {
				font-weight: 700;
				font-size: 26px;
			}

			.btn__wrap {
				margin-top: 10px;
			}

			.tellow__btn {
				background: #ffb734;
				border-radius: 5px;
				padding: 15px 25px;
				margin-right: 10px;
				font-size: 14px;
			}

			.tellow__btn:last-child {
				margin-right: 0;
			}

			.mines-wrap {
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
				opacity: 0;
				/* opacity: 1; */
				transition: opacity ease 0.5s;
			}

			.words-wrap {
				display: flex;
				flex-direction: row;
				font-family: "Roboto Mono", monospace;
				font-weight: 700;
				font-size: 56px;
				color: #cfbb0e;
			}

			.stars-wrap {
				width: 200px;
				height: 210px;
				background: #000;
				border-radius: 10px;
				box-shadow: 0px 0px 25px #ffb734;
				padding: 5px;
			}

			.star-row {
				display: flex;
				flex-direction: row;
			}

			.star {
				display: flex;
				align-items: center;
				justify-content: center;
				width: 30px;
				height: 30px;
				margin: 5px;
				background-color: #2e99a9;
				border-radius: 5px;
				transition: background-color ease 1s;
			}

			.star-wrap {
				display: flex;
				flex-direction: row;
			}
			.star-image {
				height: 25px;
				width: 25px;
				transition: opacity ease 1s;
			}
			/* .display-none {
	display: none;
}

.display-flex {
	display: flex;
} */

			.control-wrap {
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
			}
			.control-text {
				margin: 10px 0;
				font-weight: 600;
				font-size: 23px;
			}
			.count-wrap {
				display: flex;
				flex-direction: row;
				align-items: center;
				justify-content: center;
				margin-bottom: 20px;
			}
			.count-text {
				font-size: 23px;
				margin: 0 20px;
			}
			.count-up,
			.count-down {
				background-color: azure;
				width: 35px;
				height: 35px;
				border-radius: 50%;
			}

			.count-image {
				width: 20px;
			}

			.get-signal {
				background: #0959b0;
				font-size: 14px;
				padding: 10px;
				border-radius: 10px;
				width: 90px;
				transition: background ease 1s;
			}

			.word {
				display: inline-block;
				animation: wave 1.5s infinite;
			}

			.word:nth-child(1) {
				animation-delay: 0s;
			}

			.word:nth-child(2) {
				animation-delay: 0.1s;
			}

			.word:nth-child(3) {
				animation-delay: 0.2s;
			}

			.word:nth-child(4) {
				animation-delay: 0.3s;
			}

			.word:nth-child(5) {
				animation-delay: 0.4s;
			}

			@keyframes wave {
				0%,
				100% {
					transform: translateY(0);
				}
				50% {
					transform: translateY(-20px);
				}
			}

			.opacity-off {
				opacity: 0;
			}

			.opacity-on {
				opacity: 1;
			}

			.background-black {
				background: #000;
			}
			.background-blue {
				background: #2e99a9;
			}

			.background-gray {
				background: #393741;
			}
		</style>
		<main class="wrap">
			<section class="main">
				<div class="lang-wrap">
					<p class="main__lang">CHOOSE LANGUAGE</p>
					<div class="btn__wrap">
						<button class="tellow__btn" type="button" id="btn_rus">RUS</button>
						<button class="tellow__btn" type="button" id="btn_eng">ENG</button>
					</div>
				</div>
				<div class="mines-wrap opacity-off">
					<div class="words-wrap">
						<p class="word">M</p>
						<p class="word">I</p>
						<p class="word">N</p>
						<p class="word">E</p>
						<p class="word">S</p>
					</div>
					<div class="stars-wrap">
						<div class="stars-row">
							<div class="star-wrap">
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
							</div>
						</div>
						<div class="stars-row">
							<div class="star-wrap">
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
							</div>
						</div>
						<div class="stars-row">
							<div class="star-wrap">
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
							</div>
						</div>
						<div class="stars-row">
							<div class="star-wrap">
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
							</div>
						</div>
						<div class="stars-row">
							<div class="star-wrap">
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
								<div class="star">
									<img src="./star.svg" alt="" class="star-image opacity-off" />
								</div>
							</div>
						</div>
					</div>
					<div class="control-wrap">
						<p class="control-text"></p>
						<div class="count-wrap">
							<button class="count-down">
								<img src="./minus.svg" alt="minus" class="count-image" />
							</button>
							<p class="count-text"></p>
							<button class="count-up">
								<img src="./plus.svg" alt="plus" class="count-image" />
							</button>
						</div>
						<button class="get-signal"></button>
					</div>
				</div>
			</section>
		</main>
		<script type="text/javascript">
			const langWrap = document.querySelector(".lang-wrap");
			const minesWrap = document.querySelector(".mines-wrap");
			const controlText = document.querySelector(".control-text");
			const getSignal = document.querySelector(".get-signal");
			const countText = document.querySelector(".count-text");

			const btnRus = document.querySelector("#btn_rus");
			const btnEng = document.querySelector("#btn_eng");

			const countMinus = document.querySelector(".count-down");
			const countPlus = document.querySelector(".count-up");

			let count = 3;
			let toggle = false;
			let btnSignalActive = true;
			const audio = new Audio("./audio.mp3");

			function generateRandomNumbers() {
				const randomNumbers = [];
				while (randomNumbers.length < 5) {
					const randomNumber = Math.floor(Math.random() * 25); // Числа от 0 до 24
					if (!randomNumbers.includes(randomNumber)) {
						randomNumbers.push(randomNumber);
					}
				}
				return randomNumbers;
			}

			function applyClassesWithDelay() {
				getSignal.classList.add("background-gray");
				btnSignalActive = false;
				const randomNumbers = generateRandomNumbers();
				const elementsWrap = document.querySelectorAll(".star");
				const elementsImage = document.querySelectorAll(".star-image");

				if (toggle) {
					elementsWrap.forEach((item, index) => {
						elementsWrap[index].classList.remove("background-black");
						elementsImage[index].classList.remove("opacity-on");
					});
					toggle = false;
				}

				randomNumbers.forEach((num, index) => {
					if (num < elementsWrap.length) {
						setTimeout(() => {
							elementsWrap[num].classList.add("background-black");
							elementsImage[num].classList.add("opacity-on");
							audio.play();
						}, index * 1300);
					}
					setTimeout(() => {
						toggle = true;
						getSignal.classList.remove("background-gray");
						btnSignalActive = true;
					}, 6500);
				});
			}
			btnRus.addEventListener("click", () => {
				langWrap.classList.add("opacity-off");
				controlText.textContent = "КОЛ-ВО ЛОВУШЕК";
				getSignal.textContent = "ПОЛУЧИТЬ СИГНАЛ";
				countText.textContent = count;
				setTimeout(() => {
					langWrap.classList.add("display-none");
					minesWrap.classList.add("opacity-on");
				}, 600);
			});

			btnEng.addEventListener("click", () => {
				langWrap.classList.add("opacity-off");
				controlText.textContent = "NUMBER OF TRAPS";
				getSignal.textContent = "GET SIGNAL";
				countText.textContent = count;
				setTimeout(() => {
					langWrap.classList.add("display-none");
					minesWrap.classList.add("opacity-on");
				}, 600);
			});

			countMinus.addEventListener("click", () => {
				if (count < 2) return;

				count -= 2;
				countText.textContent = count;
			});
			countPlus.addEventListener("click", () => {
				if (count > 22) return;

				count += 2;
				countText.textContent = count;
			});

			getSignal.addEventListener("click", () => {
				btnSignalActive ? applyClassesWithDelay() : "";
			});
		</script>
	</body>
</html>
